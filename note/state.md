# state
## 01.含义
一个应用由多个组件搭建而成，组件最重要的概念就是 State（状态），`State` 是一个组件的 UI 数据模型。

`State` 作为组件的私有属性，通过对属性状态的监听去渲染 UI，从而完成用户数据和界面显示的一致性。

组件的任何UI 改变，都可以在 `State` 的变化中体现出来，State还必须是代表一个组件UI呈现的最小状态集，即State中的所有状态都是用于反映组件UI的变化，没有任何多余的状态，也不需要通过其他状态计算而来的中间状态。

## 02.更新
更新组件的 `State` 只能通过 `setState()` 来实现。
```js
this.setState({title: 'react'})
```
`State` 的更新是异步的，调用 `setState()` 只是把要修改的状态放入一个队列，React 会优化真正的执行时机，可能会把多次 setState 的状态修改合并为一次状态修改。

例如，购物车中点击一次购买数量按钮，购买的数量就会增加，如果我们点击两次，在React合并多次修改为一次的情况下，后面的操作覆盖掉了前面的操作，最终购买的数量只增加了1个。

如果我们要实现加2的效果，可以使用另一个接收一个函数作为参数的setState，这个函数有两个参数，第一个是当前最新状态（本次组件状态修改后的状态）的前一个状态preState（本次组件状态修改前的状态），第二个参数是当前最新的属性props。

```js
this.setState((preState, props) => ({
    counter: preState.quantiy + 1;
}))
```
`State` 的更新是一个浅合并的过程，只需要传入发生改变的 `State`，而不需要完整的 `State`。